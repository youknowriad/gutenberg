$icon_size: 30px;
$icon_padding: 3px;

.block-editor-url-popover > .components-popover__content {
	border: none;
}

.block-editor-url-popover__input-container,
.block-editor-url-popover__additional-controls {
	border: $border-width solid $light-gray-500;
}
.block-editor-url-popover__additional-controls {
	border-top: none;
}


.block-editor-url-popover__row {
	display: flex;
}

// Any children of the popover-row that are not the settings-toggle
// should take up as much space as possible.
.block-editor-url-popover__row > :not(.block-editor-url-popover__settings-toggle) {
	flex-grow: 1;
}

// Mimic toolbar component styles for the icons in this popover.
.block-editor-url-popover .block-editor-url-popover__input-container .components-icon-button {
	padding: $icon_padding;

	> svg {
		padding: 5px;
		border-radius: $radius-round-rectangle;
		height: $icon_size;
		width: $icon_size;
	}

	&:not(:disabled):not([aria-disabled="true"]):not(.is-default):hover {
		box-shadow: none;

		> svg {
			@include formatting-button-style__hover;
		}
	}

	&:not(:disabled):focus {
		box-shadow: none;

		> svg {
			@include formatting-button-style__focus;
		}
	}
}

.block-editor-url-popover__settings-toggle {
	flex-shrink: 0;

	// Add a left divider to the toggle button.
	border-radius: 0;
	border-left: $border-width solid $light-gray-500;
	margin-left: 1px;

	&[aria-expanded="true"] .dashicon {
		transform: rotate(180deg);
	}
}

.block-editor-url-popover__settings {
	display: block;
	padding: $panel-padding;
	border-top: $border-width solid $light-gray-500;

	.components-base-control:last-child .components-base-control__field {
		margin-bottom: 0;
	}
}

.block-editor-url-popover__link-editor,
.block-editor-url-popover__link-viewer {
	display: flex;
}

.block-editor-url-popover__link-viewer-url {
	margin: $grid-size - $border-width;
	flex-grow: 1;
	flex-shrink: 1;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	min-width: 150px;
	max-width: 500px;

	&.has-invalid-link {
		color: $alert-red;
	}
}

.block-editor-url-popover__additional-controls {
	width: calc(100% - #{2 * ($icon_padding + $icon_size + $icon_padding)});
}
